{
  "rules": {
    "users": {
      ".indexOn": ["firebaseUid", "email", "username", "role"],
      ".read": true,
      ".write": true
    },
    "products": {
      ".indexOn": ["name", "category", "price", "quantity"],
      ".read": true,
      ".write": true
    },
    "cart": {
      ".indexOn": ["userId", "productId", "timestamp"],
      ".read": true,
      ".write": true
    },
    "cart_items": {
      ".indexOn": ["userId", "productId", "timestamp"],
      ".read": true,
      ".write": true
    },
    "orders": {
      ".indexOn": ["customerId", "customerUsername", "orderDate", "status"],
      ".read": true,
      ".write": true
    },
    "sales": {
      ".indexOn": ["userId", "employeeId", "timestamp", "status"],
      ".read": true,
      ".write": true
    },
    "returns": {
      ".indexOn": ["saleId", "userId", "timestamp", "status"],
      ".read": true,
      ".write": true
    },
    "analytics": {
      ".read": true,
      ".write": true
    },
    "chats": {
      ".indexOn": ["customerId", "employeeId", "timestamp", "status"],
      ".read": true,
      ".write": true
    },
    "chat_sessions": {
      ".indexOn": ["customerId", "employeeId", "timestamp", "status"],
      ".read": true,
      ".write": true
    },
    "messages": {
      ".indexOn": ["chatId", "senderId", "timestamp"],
      ".read": true,
      ".write": true
    },
    "support_chats": {
      ".indexOn": ["customerId", "customerName", "timestamp", "isActive"],
      ".read": true,
      ".write": true
    },
    "support_messages": {
      ".indexOn": ["chatId", "senderId", "timestamp", "isFromCustomer"],
      ".read": true,
      ".write": true
    },
    "test": {
      ".read": true,
      ".write": true
    },
    "potential_orders": {
      ".indexOn": ["customerId", "status", "createdAt", "updatedAt"],
      ".read": true,
      ".write": true
    },
    "fcm_tokens": {
      ".indexOn": ["userId", "role", "lastUpdated"],
      "$userId": {
        ".read": "$userId === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'ADMIN'",
        ".write": "$userId === auth.uid",
        ".validate": "newData.hasChildren(['token', 'userId', 'role', 'lastUpdated']) && newData.child('userId').val() === $userId"
      }
    },
    "notification_logs": {
      ".indexOn": ["userId", "type", "timestamp", "status"],
      "$logId": {
        ".read": "auth != null && (data.child('userId').val() === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'ADMIN')",
        ".write": "auth != null && (newData.child('userId').val() === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'ADMIN')"
      }
    },
    "notification_settings": {
      "$userId": {
        ".read": "$userId === auth.uid",
        ".write": "$userId === auth.uid",
        ".validate": "newData.hasChildren(['enablePush', 'enableLocal']) && newData.child('enablePush').isBoolean() && newData.child('enableLocal').isBoolean()"
      }
    }
  }
}
